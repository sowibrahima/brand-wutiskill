<%def name="online_help_token()"><% return "course" %></%def>
<%namespace name='static' file='static_content.html'/>
<%!
from django.utils.translation import gettext as _
from django.urls import reverse
%>
<%page args="course" expression_filter="h"/>
<article class="course-card-compact" id="${course.id}" role="region" aria-label="${course.display_name_with_default}">
    <div class="course-image-compact">
      <img src="${course.course_image_url}" onerror="this.src='/theming/asset/images/no_course_image.png';" alt="${course.display_name_with_default}" />
    </div>
    
    <div class="course-content-compact">
      <div class="course-meta-top">
        <span class="course-type">Cours</span>
        <span class="course-certificate">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M8 1L9.5 5.5L14 4L11 8L14 12L9.5 10.5L8 15L6.5 10.5L2 12L5 8L2 4L6.5 5.5L8 1Z" fill="#FFBA08"/>
          </svg>
          Certificat
        </span>
      </div>
      
      <h3 class="course-title-compact">${course.display_name_with_default}</h3>
      
      <div class="course-meta-bottom">
        <%
        if course.start is not None:
            course_date_string = course.start.strftime('%Y-%m-%dT%H:%M:%S%z')
        else:
            course_date_string = ''
        %>
        <span class="course-start">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none" class="calendar-icon">
            <rect x="1" y="2" width="12" height="11" rx="1" stroke="#6b7280" stroke-width="1" fill="none"/>
            <line x1="4" y1="0" x2="4" y2="3" stroke="#6b7280" stroke-width="1"/>
            <line x1="10" y1="0" x2="10" y2="3" stroke="#6b7280" stroke-width="1"/>
            <line x1="1" y1="5" x2="13" y2="5" stroke="#6b7280" stroke-width="1"/>
          </svg>
          % if course.advertised_start is not None:
            ${course.advertised_start}
          % elif course.start is not None:
            ${course.start.strftime('%d/%m/%Y')}
          % endif
        </span>
      </div>
      
    </div>
    
    <a href="${reverse('about_course', args=[str(course.id)])}" class="course-link-overlay" aria-label="En savoir plus sur ${course.display_name_with_default}"></a>
    <div class="sr">
      <ul>
        <li>${course.display_org_with_default}</li>
        <li>${course.display_number_with_default}</li>
        % if course.advertised_start is not None:
            <li>${_("Starts")}: <time itemprop="startDate">${course.advertised_start}</time></li>
        % else:
            <li>${_("Starts")}: <time class="localized_datetime" itemprop="startDate" data-format="shortDate" data-datetime="${course_date_string}" data-language="${LANGUAGE_CODE}"></time></li>
        % endif
      </ul>
    </div>
</article>
<%static:require_module_async module_name="js/dateutil_factory" class_name="DateUtilFactory">
    DateUtilFactory.transform(iterationKey=".localized_datetime");
</%static:require_module_async>
